{
  "Logging": {
    "LogLevel": {
      "Default": "Information",
      "Microsoft.AspNetCore": "Warning"
    }
  },
  "AllowedHosts": "*",
  "MessagingBus": {
    "Implementation": "RedisSignalR",
    "RedisStreamPrefix": "stream:",
    "RedisKeyPrefix": "runs:",
    "RedisDb": 0
  },
  "Cosmos": {
    "DatabaseName": "cookbook-db",
    "UseEmulator": true
  },
  "Storage": {
    "UseAzurite": true,
    "ContainerName": "artifacts",
    "Retention": {
      "CommittedRetentionDays": 180,
      "NonCommittedRetentionDays": 30,
      "EnableCleanup": true,
      "CleanupIntervalHours": 24,
      "MaxDeletesPerRun": 1000
    }
  },
  "Llm": {
    "DefaultProvider": "OpenAI",
    "OpenAI": {
      "Model": "gpt-4o"
    },
    "Anthropic": {
      "Model": "claude-sonnet-4-20250514"
    },
    "PhaseProviders": {
      "Ingest.Extract": "OpenAI",
      "Ingest.Normalize": "OpenAI",
      "Ingest.RepairJson": "OpenAI",
      "Ingest.RepairParaphrase": "OpenAI"
    }
  },
  "Ingest": {
    "MaxDiscoveryCandidates": 10,
    "DraftExpirationDays": 7,
    "MaxFetchSizeBytes": 5242880,
    "ContentCharacterBudget": 60000,
    "RespectRobotsTxt": true,
    "MaxArtifactSizeBytes": 1048576,
    "UserAgent": "CookbookIngestAgent/1.0 (+https://github.com/cookbook-agent-platform)",
    "FetchTimeoutSeconds": 30,
    "MaxFetchRetries": 2,
    "Guardrail": {
      "TokenOverlapWarningThreshold": 40,
      "TokenOverlapErrorThreshold": 80,
      "NgramSimilarityWarningThreshold": 0.2,
      "NgramSimilarityErrorThreshold": 0.35,
      "NgramSize": 5,
      "AutoRepairOnError": true
    },
    "CircuitBreaker": {
      "FailureThreshold": 5,
      "FailureWindowMinutes": 10,
      "BlockDurationMinutes": 30
    },
    "Search": {
      "DefaultProvider": "brave",
      "AllowFallback": false,
      "Brave": {
        "Endpoint": "https://api.search.brave.com/res/v1/web/search",
        "Market": "en-US",
        "SafeSearch": "moderate",
        "MaxResults": 10,
        "Enabled": true,
        "IsDefault": true,
        "TimeoutSeconds": 30,
        "RateLimitPerMinute": 15,
        "AllowedDomains": [],
        "DeniedDomains": []
      },
      "Google": {
        "Endpoint": "https://www.googleapis.com/customsearch/v1",
        "Language": "en",
        "Country": "us",
        "SafeSearch": "medium",
        "MaxResults": 10,
        "Enabled": true,
        "IsDefault": false,
        "TimeoutSeconds": 30,
        "RateLimitPerMinute": 100,
        "UseSiteRestrictions": false,
        "SiteRestrictions": [],
        "AllowedDomains": [],
        "DeniedDomains": []
      }
    }
  }
}
